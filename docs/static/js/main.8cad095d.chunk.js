(this["webpackJsonpzoom-downloader"]=this["webpackJsonpzoom-downloader"]||[]).push([[0],{140:function(e,t,n){},141:function(e,t,n){"use strict";n.r(t);var r,c=n(2),a=n.n(c),s=n(27),o=n.n(s),i=n(9),l=n(71),u=n(6),d=n(25),b=n.n(d),j=n(40),p=n(31),O=n(54),h=n.n(O);n(77);!function(e){e[e.INTERNAL_SERVER_ERROR=500]="INTERNAL_SERVER_ERROR",e[e.BAD_REQUEST=400]="BAD_REQUEST",e[e.UNAUTHORIZED=401]="UNAUTHORIZED",e[e.FORBIDDEN=403]="FORBIDDEN",e[e.NOT_FOUND=404]="NOT_FOUND",e[e.CONFLICT=409]="CONFLICT",e[e.CREATED=201]="CREATED",e[e.OK=200]="OK"}(r||(r={}));var f=n(5),x=function(e){e.isMobile;var t=e.token,n=(e.setToken,e.setUser,e.user),a=Object(u.g)(),s=Object(c.useState)(!1),o=Object(i.a)(s,2),l=o[0],d=o[1],O=Object(c.useState)(""),x=Object(i.a)(O,2),m=x[0],_=x[1],g=Object(c.useState)(new Date("2016/1/1")),v=Object(i.a)(g,2),w=v[0],S=v[1],k=Object(c.useState)(new Date),E=Object(i.a)(k,2),D=E[0],N=E[1],T=Object(c.useState)(""),y=Object(i.a)(T,2),R=y[0],C=y[1],F=Object(c.useState)(""),I=Object(i.a)(F,2),U=I[0],A=I[1],L=function(e){C(null==e?"This field is required":""),S(e)},W=function(e){A(null==e?"This field is required":""),N(e)},z=function(e){return e.preventDefault()},B=function(){var e=Object(p.a)(b.a.mark((function e(){var c,s,o,i,l,u,p,O,h,f,x,m,g,v,S,k,E,N;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(w&&D){e.next=2;break}return e.abrupt("return");case 2:return d(!0),e.next=5,fetch("https://free-cors-bypass.herokuapp.com/https://api.zoom.us/v2/users/".concat(n.id,"/recordings?from=").concat(w.toISOString().split("T")[0],"&to=").concat(D.toISOString().split("T")[0],"&page_size=300"),{headers:{Authorization:"Bearer ".concat(t),"content-type":"application/json"}});case 5:c=e.sent,e.t0=c.status,e.next=e.t0===r.OK?9:e.t0===r.UNAUTHORIZED?10:11;break;case 9:return e.abrupt("break",12);case 10:return e.abrupt("return",a.push("/user"));case 11:return e.abrupt("break",12);case 12:return e.next=14,c.json();case 14:return s=e.sent,console.log(s),e.prev=16,e.next=19,window.showDirectoryPicker();case 19:o=e.sent,i=0,l=0,u=Object(j.a)(s.meetings);try{for(u.s();!(p=u.n()).done;)O=p.value,i+=O.recording_files.length}catch(b){u.e(b)}finally{u.f()}h=performance.now(),_("Downloaded ".concat(l,"/").concat(i)),f=Object(j.a)(s.meetings),e.prev=27,f.s();case 29:if((x=f.n()).done){e.next=75;break}return m=x.value,e.next=33,o.getDirectoryHandle("".concat(m.topic," (").concat(m.id,")").replaceAll(/[\\/:*?"<>|]/g,"-"),{create:!0});case 33:g=e.sent,v=Object(j.a)(m.recording_files),e.prev=35,v.s();case 37:if((S=v.n()).done){e.next=65;break}return k=S.value,e.prev=39,e.next=42,g.getFileHandle("".concat(k.id,".").concat(k.file_extension));case 42:if(!e.sent){e.next=45;break}return _("Downloaded ".concat(++l,"/").concat(i," ").concat(l<i?"(".concat(((performance.now()-h)*i/l/1e3).toFixed(2),"s remaining)"):"")),e.abrupt("continue",63);case 45:e.next=49;break;case 47:e.prev=47,e.t1=e.catch(39);case 49:return e.next=51,g.getFileHandle("".concat(new Date(k.recording_start).toLocaleString()," to ").concat(new Date(k.recording_end).toLocaleString()," (").concat(k.id,").").concat(k.file_extension).replaceAll(/[\\/:*?"<>|]/g,"-"),{create:!0});case 51:return E=e.sent,e.next=54,fetch("https://free-cors-bypass.herokuapp.com/".concat(k.download_url,"?access_token=").concat(t));case 54:if(!(N=e.sent).body){e.next=62;break}return e.t2=N.body,e.next=59,E.createWritable();case 59:return e.t3=e.sent,e.next=62,e.t2.pipeTo.call(e.t2,e.t3);case 62:_("Downloaded ".concat(++l,"/").concat(i," ").concat(l<i?"(".concat(((performance.now()-h)*i/l/1e3).toFixed(2),"s remaining)"):""));case 63:e.next=37;break;case 65:e.next=70;break;case 67:e.prev=67,e.t4=e.catch(35),v.e(e.t4);case 70:return e.prev=70,v.f(),e.finish(70);case 73:e.next=29;break;case 75:e.next=80;break;case 77:e.prev=77,e.t5=e.catch(27),f.e(e.t5);case 80:return e.prev=80,f.f(),e.finish(80);case 83:e.next=88;break;case 85:e.prev=85,e.t6=e.catch(16),d(!1);case 88:d(!1);case 89:case"end":return e.stop()}}),e,null,[[16,85],[27,77,80,83],[35,67,70,73],[39,47]])})));return function(){return e.apply(this,arguments)}}();return Object(f.jsxs)("div",{className:"vbox gap padding",children:[Object(f.jsx)("h1",{children:"".concat(n.first_name," ").concat(n.last_name)}),Object(f.jsxs)("form",{onSubmit:function(e){e.preventDefault(),B()},children:[Object(f.jsxs)("label",{onClick:z,children:["Start Date",Object(f.jsx)(h.a,{selected:w,showYearDropdown:!0,showMonthDropdown:!0,closeOnScroll:function(e){return e.target===document},onChange:function(e){L(e)},className:""!==R?"error":""}),Object(f.jsx)("p",{className:"error",children:R})]}),Object(f.jsxs)("label",{onClick:z,children:["End Date",Object(f.jsx)(h.a,{selected:D,showYearDropdown:!0,showMonthDropdown:!0,closeOnScroll:function(e){return e.target===document},onChange:function(e){W(e)},className:""!==U?"error":""}),Object(f.jsx)("p",{className:"error",children:U})]}),Object(f.jsx)("button",{disabled:l,children:l?Object(f.jsx)("div",{className:"spinner"}):"Download"}),Object(f.jsx)("p",{children:m})]})]})},m=n(70),_=n.n(m),g=function(e){e.isMobile;var t=e.token,n=e.setToken,a=e.setUser,s=e.user,o=Object(u.g)(),l=Object(c.useState)([]),d=Object(i.a)(l,2),j=d[0],O=d[1],h=Object(c.useState)(""),x=Object(i.a)(h,2),m=x[0],g=x[1],v=Object(c.useState)(""),w=Object(i.a)(v,2),S=w[0],k=w[1],E=Object(c.useState)(!1),D=Object(i.a)(E,2),N=D[0],T=D[1],y=function(e){0===e.trim().length?g("This field is required"):g(""),n(e)};return Object(c.useEffect)((function(){var e=0;return O([]),T(!1),""!==t.trim()?(T(!0),e=setTimeout(Object(p.a)(b.a.mark((function e(){var n,c;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://free-cors-bypass.herokuapp.com/https://api.zoom.us/v2/users?page_size=300",{headers:{Authorization:"Bearer ".concat(t),"content-type":"application/json"}});case 2:n=e.sent,T(!1),e.t0=n.status,e.next=e.t0===r.OK?7:e.t0===r.UNAUTHORIZED?14:e.t0===r.INTERNAL_SERVER_ERROR?16:18;break;case 7:return e.next=9,n.json();case 9:return c=e.sent,O(c.users),console.log(c),g(""),e.abrupt("break",19);case 14:return g("Invalid jwt"),e.abrupt("break",19);case 16:return k("Error: Please try again later."),e.abrupt("return",T(!1));case 18:return e.abrupt("break",19);case 19:case"end":return e.stop()}}),e)}))),1e3)):T(!1),function(){clearTimeout(e)}}),[t]),Object(f.jsxs)("form",{className:"padding",children:[Object(f.jsxs)("label",{children:["JWT",Object(f.jsx)("input",{className:""!==m?"error":"",onChange:function(e){y(e.target.value)},value:t}),Object(f.jsx)("p",{className:"error",children:m})]}),Object(f.jsx)("p",{children:"Users"}),Object(f.jsxs)("div",{className:"vbox gap",children:[N?Object(f.jsx)("div",{className:"spinner"}):null,j.map((function(e){return Object(f.jsx)("button",{type:"button",className:e.id===(null===s||void 0===s?void 0:s.id)?_.a.selected:"",onClick:function(){!function(e){a(e),o.push("/")}(e)},children:"".concat(e.first_name," ").concat(e.last_name)},e.id)}))]}),Object(f.jsx)("p",{className:"error",children:S})]})},v=function(){var e=Object(c.useState)(""),t=Object(i.a)(e,2),n=t[0],r=t[1],a=Object(c.useState)(null),s=Object(i.a)(a,2),o=s[0],d=s[1],b=Object(c.useState)(!1),j=Object(i.a)(b,2),p=j[0],O=j[1];return Object(c.useEffect)((function(){var e=sessionStorage.getItem("token");e&&r(e);var t=function(){O(window.matchMedia("(max-width: 768px)").matches)};return window.addEventListener("resize",t),t(),function(){window.removeEventListener("resize",t)}}),[]),Object(c.useEffect)((function(){sessionStorage.setItem("token",n),n||d(null)}),[n]),Object(f.jsx)(l.a,{children:Object(f.jsxs)(u.d,{children:[Object(f.jsx)(u.b,{path:"/user",children:Object(f.jsx)(g,{isMobile:p,token:n,setToken:r,setUser:d,user:o})}),Object(f.jsx)(u.b,{path:"/",children:n&&o?Object(f.jsx)(x,{isMobile:p,token:n,setToken:r,setUser:d,user:o}):Object(f.jsx)(u.a,{to:"/user"})})]})})},w=(n(140),function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,146)).then((function(t){var n=t.getCLS,r=t.getFID,c=t.getFCP,a=t.getLCP,s=t.getTTFB;n(e),r(e),c(e),a(e),s(e)}))});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(Object(f.jsx)(a.a.StrictMode,{children:Object(f.jsx)(v,{})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)})),w()},70:function(e,t,n){e.exports={secondaryColor:"userSelect_secondaryColor__1mEp7",tertiaryColor:"userSelect_tertiaryColor__15Yib",quaternaryColor:"userSelect_quaternaryColor__2NW1J",secondaryFillColor:"userSelect_secondaryFillColor__1RSfT",tertiaryFillColor:"userSelect_tertiaryFillColor__19YhX",quaternaryFillColor:"userSelect_quaternaryFillColor__1-h7N",gray:"userSelect_gray__1924d",maxWidth700:"userSelect_maxWidth700__3mxPn",maxWidth1100:"userSelect_maxWidth1100__1dWzX",maxWidth1400:"userSelect_maxWidth1400__3LmKO",selected:"userSelect_selected__2Uj_L"}}},[[141,1,2]]]);
//# sourceMappingURL=main.8cad095d.chunk.js.map